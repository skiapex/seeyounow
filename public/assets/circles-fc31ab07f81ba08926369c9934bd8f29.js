!function(){var t=window.Circles=function(t){var e=t.id;if(this._el=document.getElementById(e),null!==this._el){var i=Math.PI/180*270;this._radius=t.radius,this._percentage=t.percentage,this._text=t.text,this._number=t.number||this._percentage,this._strokeWidth=t.width||10,this._colors=t.colors||["#EEE","#F00"],this._interval=16,this._textWrpClass="circles-text-wrp",this._textClass="circles-text",this._numberClass="circles-number",this._confirmAnimation(t.duration),this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=i-this._start,this._el.innerHTML=this._wrap(this._generateSvg()+this._generateText()),this._canAnimate&&this._animate()}};t.prototype={VERSION:"0.0.3",_confirmAnimation:function(t){if(null===t)return void(this._canAnimate=!1);t=t||500;var e=t/this._interval,i=this._percentage/e,s=this._number/e;this._percentage<=1+i?this._canAnimate=!1:(this._canAnimate=!0,this._pathFactor=i,this._numberFactor=s)},_animate:function(){var t=1,e=this,i=this._el.getElementsByTagName("path")[1],s=this._getNumberElement(),a=this._number%1===0,r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,e._interval)},n=function(){var h=e._pathFactor*t,_=e._pathFactor*(t+1),u=e._numberFactor*t,c=!0;a&&(u=Math.round(u)),_>e._percentage&&(h=e._percentage,u=e._number,c=!1),h>e._percentage||(i.setAttribute("d",e._calculatePath(h,!0)),s.innerHTML=e._calculateNumber(u),t++,c&&r(n))};r(n)},_getNumberElement:function(){for(var t=this._el.getElementsByTagName("span"),e=0,i=t.length;i>e;e++)if(t[e].className===this._numberClass)return t[e]},_wrap:function(t){return'<div class="circles-wrp" style="position:relative; display:inline-block;">'+t+"</div>"},_generateText:function(){var t='<div class="'+this._textWrpClass+'" style="position:absolute; top:0; left:0; text-align:center; width:100%; font-size:'+.5*this._radius+"px; height:"+this._svgSize+"px; line-height:"+this._svgSize+'px;">'+this._calculateNumber(this._canAnimate?0:this._number);return this._text&&(t+='<span class="'+this._textClass+'">'+this._text+"</span>"),t+="</div>"},_calculateNumber:function(t){var e=(t+"").split("."),i='<span class="'+this._numberClass+'">'+e[0];return e.length>1&&(i+='.<span style="font-size:.4em">'+e[1].substring(0,2)+"</span>"),i+"</span>"},_generateSvg:function(){return'<svg width="'+this._svgSize+'" height="'+this._svgSize+'">'+this._generatePath(100,!1,this._colors[0])+this._generatePath(this._canAnimate?1:this._percentage,!0,this._colors[1])+"</svg>"},_generatePath:function(t,e,i){return'<path fill="transparent" stroke="'+i+'" stroke-width="'+this._strokeWidth+'" d="'+this._calculatePath(t,e)+'"/>'},_calculatePath:function(t,e){var i=this._start+t/100*this._circ,s=this._precise(i);return this._arc(s,e)},_arc:function(t,e){var i=t-.001,s=t-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,s,1,this._radius+this._radiusAdjusted*Math.cos(i),this._radius+this._radiusAdjusted*Math.sin(i),e?"":"Z"].join(" ")},_precise:function(t){return Math.round(1e3*t)/1e3}},t.create=function(e){return new t(e)}}();