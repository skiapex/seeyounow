<!-- Use view helpers (e.g. link_to and image_tag) -->
<!-- and implement real data -->

<head>
    <title>SeeYouNow | ESAS Assessment</title>
</head>

<h4 class="page-header">
  <p><strong>Completed by:</strong> <%= link_to "#{@esas_assessment.patient.first_name} #{@esas_assessment.patient.last_name}", patient_path(@esas_assessment.patient) %></p>
  <% if current_clinician %>
    <span class="pull-right">
    <%= link_to "Edit", edit_esas_assessment_path, class: 'btn btn-u btn-success' %>
    </span>
  <% end %>
  <p><strong>For:</strong> <%= @esas_assessment.clinician.occupation.name %> <%= @esas_assessment.clinician.first_name %> <%= @esas_assessment.clinician.last_name %></p>
</h4>
<h4 span class="time"><strong>Completed:</strong> <%= @esas_assessment.updated_at.strftime("%B %d, %Y") %> at <%= @esas_assessment.updated_at.strftime("%H:%M") %>

  <% if current_clinician %>
    <span class="pull-right">
    <%= link_to "Delete", esas_assessment_path, method: :delete, data: {confirm: 'Are you sure you want to delete'}, class: 'btn btn-u btn-success' %>
    </span>
  <% end %>
</h4>

<head>
   <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart']}]}"></script>
    
          <div id="ex0"></div>
    <script type="text/javascript">
    google.load('visualization', '1', {packages: ['corechart']});
    google.setOnLoadCallback(drawChart);


    function drawChart() {

      var data = google.visualization.arrayToDataTable([
         ['Symptom', 'Intensity'],
         ['Pain', <%= @esas_assessment.pain %> ],
         ['Tiredness', <%= @esas_assessment.tiredness %> ],
         ['Drowsiness', <%= @esas_assessment.drowsiness %> ],
         ['Nausea', <%= @esas_assessment.nausea %> ],
         ['Lack of Appetite', <%= @esas_assessment.lack_of_appetite %> ],
         ['Shortness of Breath', <%= @esas_assessment.shortness_of_breath %> ],
         ['Depression', <%= @esas_assessment.depression %> ],
         ['Wellbeing', <%= @esas_assessment.wellbeing %> ],
         ['<%= @esas_assessment.other_symptom.symptom_type.capitalize %>', <%= @esas_assessment.other_symptom_score %> ],
      ]);

      var options = {
        width: 1000,
        height: 563,
        hAxis: {
          title: 'Symptom',
          gridlines: {count: 10}
        },
        vAxis: {
          title: 'Intensity (scale of 1-10)'
        }
      };

      var chart = new google.visualization.ColumnChart(
        document.getElementById('ex0'));

      chart.draw(data, options);
    }
    </script>

<div class="row">
  <div class="col-md-6 comment">
    <h2>Overall Comment</h2>
    <p>
      <%= @esas_assessment.esas_comment %>
    </p>
  </div>
</div>

<!--=== Content Part ===-->
<div class="container content">
    <div class="row">
        

        <!-- Begin Content -->
        <div class="col-md-9">
            <!--Basic Table-->
            <div class="panel panel-blue margin-bottom-40">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-tasks"></i> Scores</h3>
                </div>
                <div class="panel-body">
                    <p>Severity at the time of assessment of each symptom rated from 0 to 10 on a numerical scale, 0 meaning that the symptom is absent and 10 that it is of the worst possible severity</p>
                </div>                                      
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Symptom</th>
                            <th class="hidden-sm">Intensity</th>
                            <th>Comment</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pain</td>
                            <td class="hidden-sm"><%= @esas_assessment.pain %></td>
                            <td><%= @esas_assessment.pain_comment %></td>
                            <td><span class="label label-warning">Expiring</span></td>
                        </tr>
                        <tr>
                            <td>Tiredness</td>
                            <td class="hidden-sm"><%= @esas_assessment.tiredness %></td>
                            <td><%= @esas_assessment.tiredness_comment %></td>
                            <td><span class="label label-success">Success</span></td>                           
                        </tr>
                        <tr>
                            <td>Drowsiness</td>
                            <td class="hidden-sm"><%= @esas_assessment.drowsiness %></td>
                            <td><%= @esas_assessment.drowsiness_comment %></td>
                            <td><span class="label label-danger">Error!</span></td>
                        </tr>
                        <tr>
                            <td>Nausea</td>
                            <td class="hidden-sm"><%= @esas_assessment.nausea %></td>
                            <td><%= @esas_assessment.nausea_comment %></td>
                            <td><span class="label label-info">Pending..</span></td>
                        </tr>
                        <tr>
                            <td>Lack of Appetite</td>
                            <td class="hidden-sm"><%= @esas_assessment.lack_of_appetite %></td>
                            <td><%= @esas_assessment.lack_of_appetite_comment %></td>
                            <td><span class="label label-warning">Expiring</span></td>
                        </tr>
                        <tr>
                            <td>Shortness of Breath</td>
                            <td class="hidden-sm"><%= @esas_assessment.shortness_of_breath %></td>
                            <td><%= @esas_assessment.shortness_of_breath_comment %></td>
                            <td><span class="label label-success">Success</span></td>                           
                        </tr>
                        <tr>
                            <td>Depression</td>
                            <td class="hidden-sm"><%= @esas_assessment.depression %></td>
                            <td><%= @esas_assessment.depression_comment %></td>
                            <td><span class="label label-danger">Error!</span></td>
                        </tr>
                        <tr>
                            <td>Wellbeing</td>
                            <td class="hidden-sm"><%= @esas_assessment.wellbeing %></td>
                            <td><%= @esas_assessment.wellbeing_comment %></td>
                            <td><span class="label label-info">Pending..</span></td>
                        </tr>
                        <tr>
                            <td><%= @esas_assessment.other_symptom.symptom_type.capitalize %></td>
                            <td class="hidden-sm"><%= @esas_assessment.other_symptom_score %></td>
                            <td><%= @esas_assessment.other_symptom_comment %></td>
                            <td><span class="label label-warning">Expiring</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--End Basic Table-->
        </div>
        <!-- End Content -->
    </div>          
</div><!--/container-->     
<!--=== End Content Part ===-->


<div class="row">
  <div class="col-md-6 col-md-offset-1 information">
    <h2 class="page-header">Information</h2>
    <table class="table table-striped table-bordered">
      <tr>
        <td><strong>Inputter name</strong></td>
        <td><%= @esas_assessment.inputter_name %></td>
      </tr>
      <tr>
        <td><strong>Inputter type</strong></td>
        <td><%= Inputter.find_by(id: @esas_assessment.inputter_id).inputter_type %></td>
      </tr>
    </table>
  </div>
</div>