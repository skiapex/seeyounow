<!-- Use view helpers (e.g. link_to and image_tag) -->
<!-- and implement real data -->

<h4 class="page-header">
  <p><strong>Completed by:</strong> <%= link_to "#{@esas_assessment.patient.first_name} #{@esas_assessment.patient.last_name}", patient_path(@esas_assessment.patient) %></p>
  <% if current_clinician %>
    <span class="pull-right">
    <%= link_to "Edit", edit_esas_assessment_path, class: 'btn btn-sm btn-success' %>
    </span>
  <% end %>
  <p><strong>For:</strong> <%= @esas_assessment.clinician.occupation.name %> <%= @esas_assessment.clinician.first_name %> <%= @esas_assessment.clinician.last_name %></p>
</h4>
<h4 span class="time"><strong>Completed at:</strong> <%= @esas_assessment.time %> <%= @esas_assessment.month -=1 %>/<%= @esas_assessment.day %>/<%= @esas_assessment.year %>

  <% if current_clinician %>
    <span class="pull-right">
    <%= link_to "Delete", esas_assessment_path, method: :delete, data: {confirm: 'Are you sure you want to delete'}, class: 'btn btn-sm btn-success' %>
    </span>
  <% end %>
</h4>

<head>
   <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart']}]}"></script>
    
          <div id="ex0"></div>
    <script type="text/javascript">
    google.load('visualization', '1', {packages: ['corechart']});
    google.setOnLoadCallback(drawChart);


    function drawChart() {

      var data = google.visualization.arrayToDataTable([
         ['Symptom', 'Intensity'],
         ['Pain', <%= @esas_assessment.pain %> ],
         ['Tiredness', <%= @esas_assessment.tiredness %> ],
         ['Drowsiness', <%= @esas_assessment.drowsiness %> ],
         ['Nausea', <%= @esas_assessment.nausea %> ],
         ['Lack of Appetite', <%= @esas_assessment.lack_of_appetite %> ],
         ['Shortness of Breath', <%= @esas_assessment.shortness_of_breath %> ],
         ['Depression', <%= @esas_assessment.depression %> ],
         ['Wellbeing', <%= @esas_assessment.wellbeing %> ],
         ['<%= @esas_assessment.other_symptom.symptom_type.capitalize %>', <%= @esas_assessment.other_symptom_score %> ],
      ]);

      var options = {
        width: 1000,
        height: 563,
        hAxis: {
          title: 'Symptom',
          gridlines: {count: 10}
        },
        vAxis: {
          title: 'Intensity (scale of 1-10)'
        }
      };

      var chart = new google.visualization.ColumnChart(
        document.getElementById('ex0'));

      chart.draw(data, options);
    }
    </script>

<div class="row">
  <div class="col-md-6 col-md-offset-1 information">
    <h2 class="page-header">Scores</h2>
    <table class="table table-striped table-bordered">
      <tr>
        <td><strong>Pain:</strong></td><td><%= @esas_assessment.pain %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.pain_comment %></td>
      </tr>
      <tr>
        <td><strong>Tiredness:</strong></td><td><%= @esas_assessment.tiredness %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.tiredness_comment %></td>
      </tr>
      <tr>
        <td><strong>Drowsiness:</strong></td><td><%= @esas_assessment.drowsiness %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.drowsiness_comment %></td>
      </tr>
      <tr>
        <td><strong>Nausea:</strong></td><td><%= @esas_assessment.nausea %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.nausea_comment %></td>
      </tr>
      <tr>
        <td><strong>Lack of Appetite:</strong></td><td><%= @esas_assessment.lack_of_appetite %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.lack_of_appetite_comment %></td>
      </tr>
      <tr>
        <td><strong>Shortness of Breath:</strong></td><td><%= @esas_assessment.shortness_of_breath %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.shortness_of_breath_comment %></td>
      </tr>
      <tr>
        <td><strong>Depression:</strong></td><td><%= @esas_assessment.depression %></td>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.depression_comment %></td>
      </tr>
      <tr>
        <td><strong>Wellbeing:</strong></td><td><%= @esas_assessment.wellbeing %></td>
       <td><strong>Comment:</strong></td><td><%= @esas_assessment.wellbeing_comment %></td>
      </tr>
      <tr>
        <td><strong>Other Symptom Type:</strong></td><td><%= @esas_assessment.other_symptom.symptom_type %></p>
        <td><strong>Other Symptom Score:</strong></td><td><%= @esas_assessment.other_symptom_score %></p>
        <td><strong>Comment:</strong></td><td><%= @esas_assessment.wellbeing_comment %></p>
      </tr>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-md-6 col-md-offset-1 information">
    <h2 class="page-header">Information</h2>
    <table class="table table-striped table-bordered">
      <tr>
        <td><strong>Inputter name</strong></td>
        <td><%= @esas_assessment.inputter_name %></td>
      </tr>
      <tr>
        <td><strong>Inputter type</strong></td>
        <td><%= Inputter.find_by(id: @esas_assessment.inputter_id).inputter_type %></td>
      </tr>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-md-6 comment">
    <h2>Overall Comment</h2>
    <p>
      <%= @esas_assessment.esas_comment %>
    </p>
  </div>
</div>